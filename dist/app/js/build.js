/*! angular-seed-sj 2013-05-22 */"use strict";function MyCtrl1(e,n,o){e.Facebook=o,e.fbLogin=function(){o.login(e)},e.fbLogout=function(){o.logout(e)},e.accessToken=n.cookieValue,e.$watch("Facebook.fbResponse",function(o){console.debug("Watched value changed."),n.cookieValue=o?o.accessToken:"",e.accessToken=n.cookieValue}),e.changeCookie=function(){n.cookieValue="Hello World!"}}function MyCtrl2(e,n,o){e.multiCheck=[{text:"Is Brandon cool?",value:!1},{text:"Is Jon cool?",value:!1},{text:"Is this true?",value:!0}],console.log(e.multiCheck[1].value),e.testModel="test",e.userType="guest",e.login=function(){n.login("rekursiv","hunter3",function(e){console.log(e)},function(e){console.log(e)})},e.signUp=function(){n.signUp(e.username,e.password,function(e){console.log(e)},function(e){console.log(e)})},e.checkSession=function(){n.checkSession(function(e){console.log(e)},function(e){console.log(e)})},e.logoutUser=function(){n.logout(function(e){console.log(e)},function(e){console.log(e)})},e.timepicker={time:""},e.username="",e.password="",e.middleware=function(){o.post("api/middleware",{username:e.username,password:e.password})}}var app=angular.module("myApp",["myApp.filters","myApp.directives","myApp.services","myApp.controllers","ngCookies"]);app.config(["$routeProvider","$locationProvider",function(e,n){e.when("/view1",{templateUrl:"partials/partial1.html"}),e.when("/view2",{templateUrl:"partials/partial2.html",controller:"MyCtrl2"}),e.when("/sign-in",{templateUrl:"partials/sign-in.html"}),e.otherwise({redirectTo:"/view1"}),n.html5Mode(!0)}]),app.run(["$rootScope",function(e){e.$safeApply=function(e){e=e||function(){},this.$$phase?e():this.$apply(e)}}]),angular.module("myApp.services",[]),angular.module("myApp.filters",[]),angular.module("myApp.directives",[]),angular.module("myApp.controllers",[]),angular.module("myApp.controllers").controller("SignInCtrl",["$scope","user",function(e,n){e.signingIn=!0,e.userName="",e.user={},e.loggedIn=!1,e.$on("userLoggedIn",function(){e.loggedIn=!0,e.userName=n.getUser().username,console.log(n.getUser())});var o=function(n){n?e.user.pw="":e.user={}},s=function(){e.errMsg=null},t=function(){n.checkSession(function(n){e.loggedIn=!0,e.userName=n.username},function(){e.loggedIn=!1})};t(),e.showSignIn=function(){s(),e.signingIn=!0,console.log("sign in true"),o()},e.showSignUp=function(){s(),e.signingIn=!1,console.log("sign in false"),o()},e.signIn=function(){s(),console.log("%cSigning In","color: red;font-weight:bold;"),console.log("- Username: "+e.user.username),console.log("- Password: "+e.user.pw),n.login(e.user.username,e.user.pw,function(n){console.log("logged in!"),e.loggedIn=!0,e.userName=n.username,o()},function(n){console.log("login failed!"),e.errMsg=n,o(!0)})},e.signUp=function(){s(),console.warn("signUp"),console.log("username: "+e.user.username),console.log("password: "+e.user.pw),n.signUp(e.user.username,e.user.pw,function(e){console.log("added %s",e.username),o()},function(n){console.log("failed to add user"),e.errMsg=n,o(!0),console.log(n)})},e.logOut=function(){n.logout(function(){console.warn("logout successful!"),e.userName="",e.loggedIn=!1},function(){console.warn("logout failed!")})},e.deleteUser=function(){n.deleteLoggedIn(function(e){console.log(e.message),t(),o(),s()},function(e){console.log(e.message)})}}]),MyCtrl1.$inject=["$scope","$cookies","Facebook"],MyCtrl2.$inject=["$scope","user","$http"],angular.module("myApp.directives").directive("appVersion",["version",function(e){return function(n,o){o.text(e)}}]),angular.module("myApp.filters").filter("interpolate",["version",function(e){return function(n){return(n+"").replace(/\%VERSION\%/gm,e)}}]),angular.module("myApp.services").service("Facebook",["$q","$timeout",function(e){this.fbResponse="",this.login=function(n){console.debug("Logging into Facebook.");var o=e.defer();FB.login(function(e){n.$safeApply(function(){console.debug(n),o.resolve(e.authResponse)}),FB.api("/me",function(e){console.info("(Facebook) Logged in as %s",e.name)}),console.debug("Facebook logged in.")}),this.fbResponse=o.promise},this.logout=function(n){console.debug("Logging out of Facebook.");var o=e.defer();FB.logout(function(e){n.$$phase?o.resolve(e.authResponse):n.$apply(function(){o.resolve(e.authResponse)}),console.debug("Facebook logged out.")}),this.fbResponse=null}}]),window.fbAsyncInit=function(){FB.init({appId:"281909378612016"})},function(e){var n,o="facebook-jssdk",s=e.getElementsByTagName("script")[0];e.getElementById(o)||(n=e.createElement("script"),n.id=o,n.async=!0,n.src="//connect.facebook.net/en_US/all.js",s.parentNode.insertBefore(n,s))}(document),angular.module("myApp.services").value("version","0.1"),angular.module("myApp.services").service("user",["$rootScope","$http",function(e,n){var o=!1,s=!1;this.getUser=function(){return o},this.isLoggedIn=function(){return s},this.signUp=function(e,o,s,t){n.post("api/user/create",{username:e,password:o}).success(function(e){s(e)}).error(function(e){t(e)})},this.login=function(t,r,i,c){n.post("api/user/login",{username:t,password:r}).success(function(n){o=n,s=!0,e.$broadcast("userLoggedIn")}).error(function(e){c(e)})},this.checkSession=function(e,o){n.get("api/user/checkSession").success(function(n){e(n)}).error(function(e){o(e)})},this.logout=function(e,t){n.get("api/user/logout").success(function(n){o=!1,s=!1,e(n)}).error(function(e){t(e)})},this.deleteLoggedIn=function(e,o){n.get("api/user/delete").success(function(n){e(n)}).error(function(e){o(e)})}}]);