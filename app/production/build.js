/*! angular-seed-master 2013-05-21 */
"use strict";function MyCtrl1(e,n,o){e.Facebook=o,e.fbLogin=function(){o.login(e)},e.fbLogout=function(){o.logout(e)},e.accessToken=n.cookieValue,e.$watch("Facebook.fbResponse",function(o){console.debug("Watched value changed."),n.cookieValue=o?o.accessToken:"",e.accessToken=n.cookieValue}),e.changeCookie=function(){n.cookieValue="Hello World!"}}function MyCtrl2(e,n,o){e.multiCheck=[{text:"Is Brandon cool?",value:!1},{text:"Is Jon cool?",value:!1},{text:"Is this true?",value:!0}],console.log(e.multiCheck[1].value),e.testModel="test",e.userType="guest",e.login=function(){n.login("rekursiv","hunter3",function(e){console.log(e)},function(e){console.log(e)})},e.signUp=function(){n.signUp(e.username,e.password,function(e){console.log(e)},function(e){console.log(e)})},e.checkSession=function(){n.checkSession(function(e){console.log(e)},function(e){console.log(e)})},e.logoutUser=function(){n.logout(function(e){console.log(e)},function(e){console.log(e)})},e.timepicker={time:""},e.username="",e.password="",e.middleware=function(){o.post("api/middleware",{username:e.username,password:e.password})}}var app=angular.module("myApp",["myApp.filters","myApp.directives","myApp.services","myApp.controllers","ui","ngCookies"]);app.config(["$routeProvider","$locationProvider",function(e,n){e.when("/view1",{templateUrl:"partials/partial1.html"}),e.when("/view2",{templateUrl:"partials/partial2.html",controller:"MyCtrl2"}),e.when("/sign-in",{templateUrl:"partials/sign-in.html"}),e.otherwise({redirectTo:"/view1"}),n.html5Mode(!0)}]),app.run(["$rootScope",function(e){e.$safeApply=function(e){e=e||function(){},this.$$phase?e():this.$apply(e)}}]),angular.module("myApp.services",[]),angular.module("myApp.filters",[]),angular.module("myApp.directives",[]),angular.module("myApp.controllers",[]),angular.module("myApp.controllers").controller("SignInCtrl",["$scope","user",function(e,n){e.signingIn=!0,e.userName="",e.user={},e.loggedIn=!1,e.$on("userLoggedIn",function(){e.loggedIn=!0,e.userName=n.getUser().username,console.log(n.getUser())});var o=function(n){n?e.user.pw="":e.user={}},t=function(){e.errMsg=null},i=function(){n.checkSession(function(n){e.loggedIn=!0,e.userName=n.username},function(){e.loggedIn=!1})};i(),e.showSignIn=function(){t(),e.signingIn=!0,console.log("sign in true"),o()},e.showSignUp=function(){t(),e.signingIn=!1,console.log("sign in false"),o()},e.signIn=function(){t(),console.log("%cSigning In","color: red;font-weight:bold;"),console.log("- Username: "+e.user.username),console.log("- Password: "+e.user.pw),n.login(e.user.username,e.user.pw,function(n){console.log("logged in!"),e.loggedIn=!0,e.userName=n.username,o()},function(n){console.log("login failed!"),e.errMsg=n,o(!0)})},e.signUp=function(){t(),console.warn("signUp"),console.log("username: "+e.user.username),console.log("password: "+e.user.pw),n.signUp(e.user.username,e.user.pw,function(e){console.log("added %s",e.username),o()},function(n){console.log("failed to add user"),e.errMsg=n,o(!0),console.log(n)})},e.logOut=function(){n.logout(function(){console.warn("logout successful!"),e.userName="",e.loggedIn=!1},function(){console.warn("logout failed!")})},e.deleteUser=function(){n.deleteLoggedIn(function(e){console.log(e.message),i(),o(),t()},function(e){console.log(e.message)})}}]),MyCtrl1.$inject=["$scope","$cookies","Facebook"],MyCtrl2.$inject=["$scope","user","$http"],angular.module("myApp.directives").directive("asDatePicker",["$timeout",function(){var e=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1,n=function n(e){return e=e||"en",{"/":"[\\/]","-":"[-]",".":"[.]"," ":"[\\s]",dd:"(?:(?:[0-2]?[0-9]{1})|(?:[3][01]{1}))",d:"(?:(?:[0-2]?[0-9]{1})|(?:[3][01]{1}))",mm:"(?:[0]?[1-9]|[1][012])",m:"(?:[0]?[1-9]|[1][012])",DD:"(?:"+$.fn.datepicker.dates[e].days.join("|")+")",D:"(?:"+$.fn.datepicker.dates[e].daysShort.join("|")+")",MM:"(?:"+$.fn.datepicker.dates[e].months.join("|")+")",M:"(?:"+$.fn.datepicker.dates[e].monthsShort.join("|")+")",yyyy:"(?:(?:[1]{1}[0-9]{1}[0-9]{1}[0-9]{1})|(?:[2]{1}[0-9]{3}))(?![[0-9]])",yy:"(?:(?:[0-9]{1}[0-9]{1}))(?![[0-9]])"}},o=function o(e,o){var t,i=e,r=n(o);return t=0,angular.forEach(r,function(e,n){i=i.split(n).join("${"+t+"}"),t++}),t=0,angular.forEach(r,function(e){i=i.split("${"+t+"}").join(e),t++}),RegExp("^"+i+"$",["i"])};return{restrict:"A",require:"?ngModel",link:function(n,t,i,r){var s=i.language||"en",a=i.dateType||"date",c=i.dateFormat||$.fn.datepicker.dates[s]&&$.fn.datepicker.dates[s].format||"yyyy-mm-dd",u=e?o("yyyy-mm-dd",s):o(c,s);r&&(r.$parsers.unshift(function(n){return n?"date"===a&&angular.isDate(n)?(r.$setValidity("date",!0),n):angular.isString(n)&&u.test(n)?(r.$setValidity("date",!0),e?new Date(n):"string"===a?n:$.fn.datepicker.DPGlobal.parseDate(n,$.fn.datepicker.DPGlobal.parseFormat(c),s)):(r.$setValidity("date",!1),void 0):(r.$setValidity("date",!0),null)}),r.$render=function(){return r.$viewValue&&t.datepicker("update",r.$viewValue)}),e?t.prop("type","date").css("-webkit-appearance","textfield"):(r&&t.on("changeDate",function(e){n.$apply(function(){r.$setViewValue("string"===a?t.val():e.date)})}),t.attr("data-toggle","datepicker"),t.datepicker({autoclose:!0,format:c,language:s,forceParse:i.forceParse||!1}),n.$on("$destroy",function(){console.warn("$destroy");var e=t.data("datepicker");e&&(e.picker.remove(),t.data("datepicker",null))}));var l=t.siblings('[data-toggle="datepicker"]');l.length&&l.on("click",function(){t.trigger("focus")})}}}]),angular.module("myApp.directives").directive("asTimePicker",["$timeout",function(e){var n="((?:(?:[0-1][0-9])|(?:[2][0-3])|(?:[0-9])):(?:[0-5][0-9])(?::[0-5][0-9])?(?:\\s?(?:am|AM|pm|PM))?)";return{restrict:"A",require:"?ngModel",link:function(o,t,i,r){r&&t.on("changeTime.timepicker",function(){e(function(){r.$setViewValue(t.val())})});var s=RegExp("^"+n+"$",["i"]);r.$parsers.unshift(function(e){return!e||s.test(e)?(r.$setValidity("time",!0),e):(r.$setValidity("time",!1),void 0)}),t.attr("data-toggle","timepicker"),t.parent().addClass("bootstrap-timepicker"),t.timepicker();var a=t.data("timepicker"),c=t.siblings('[data-toggle="timepicker"]');c.length&&c.on("click",$.proxy(a.showWidget,a))}}}]),angular.module("myApp.directives").directive("appVersion",["version",function(e){return function(n,o){o.text(e)}}]),angular.module("myApp.directives").directive("jbFormInput",function(){var e=function(e){var n=["jbFormInput","class","type","ngRepeat","ngModel","jbRequired"];for(var o in n)if(e==n[o])return!0;return!1};return{priority:500,restrict:"E",require:"?ngModel",scope:{ngModel:"=",jbRequired:"=",type:"="},compile:function(n,o){var t=o.type||"text",i="jb-form-input-"+t+(o["class"]?" "+o["class"]:""),r=o.$attr.jbRequired?"required"+(o.jbRequired?'="'+o.jbRequired+'"':""):"",s=' class="'+i+'"',a="<div>";a+=o.label?"<span>"+o.label+"</span>":"";for(var c in o.$attr)e(c)||(s+=" "+o.$attr[c]+(o[c]?'="'+o[c]+'"':""));switch(t){case"text":case"checkbox":s+=r,a+='<input type="'+t+'"'+s+' ng-model="ngModel">';break;case"textarea":s+=r,a+="<textarea"+s+"></textarea>";break;case"multicheckbox":a+='<div ng-repeat="checkbox in ngModel"><input type="checkbox" '+s+' ng-model="checkbox.value">{{checkbox.text}}</div>';break;default:a+=""}return a+="</div>",n.replaceWith(a),function(e,n,o,i){if("multicheckbox"==t){e.checked=0,i.$setValidity("required",!1);for(var r=function(n,o){o!=n&&(n?e.checked++:e.checked--,e.checked>=e.jbRequired?i.$setValidity("required",!0):i.$setValidity("required",!1))},s=0;e.ngModel.length>s;s++)e.ngModel[s].value&&e.checked++,e.checked>=e.jbRequired&&i.$setValidity("required",!0),e.$watch("ngModel["+s+"].value",r)}}}}}),angular.module("myApp.filters").filter("interpolate",["version",function(e){return function(n){return(n+"").replace(/\%VERSION\%/gm,e)}}]),angular.module("myApp.services").service("Facebook",["$q","$timeout",function(e){this.fbResponse="",this.login=function(n){console.debug("Logging into Facebook.");var o=e.defer();FB.login(function(e){n.$safeApply(function(){console.debug(n),o.resolve(e.authResponse)}),FB.api("/me",function(e){console.info("(Facebook) Logged in as %s",e.name)}),console.debug("Facebook logged in.")}),this.fbResponse=o.promise},this.logout=function(n){console.debug("Logging out of Facebook.");var o=e.defer();FB.logout(function(e){n.$$phase?o.resolve(e.authResponse):n.$apply(function(){o.resolve(e.authResponse)}),console.debug("Facebook logged out.")}),this.fbResponse=null}}]),window.fbAsyncInit=function(){FB.init({appId:"281909378612016"})},function(e){var n,o="facebook-jssdk",t=e.getElementsByTagName("script")[0];e.getElementById(o)||(n=e.createElement("script"),n.id=o,n.async=!0,n.src="//connect.facebook.net/en_US/all.js",t.parentNode.insertBefore(n,t))}(document),angular.module("myApp.services").value("version","0.1"),angular.module("myApp.services").service("user",["$rootScope","$http",function(e,n){var o=!1,t=!1;this.getUser=function(){return o},this.isLoggedIn=function(){return t},this.signUp=function(e,o,t,i){n.post("api/user/create",{username:e,password:o}).success(function(e){t(e)}).error(function(e){i(e)})},this.login=function(i,r,s,a){n.post("api/user/login",{username:i,password:r}).success(function(n){o=n,t=!0,e.$broadcast("userLoggedIn")}).error(function(e){a(e)})},this.checkSession=function(e,o){n.get("api/user/checkSession").success(function(n){e(n)}).error(function(e){o(e)})},this.logout=function(e,i){n.get("api/user/logout").success(function(n){o=!1,t=!1,e(n)}).error(function(e){i(e)})},this.deleteLoggedIn=function(e,o){n.get("api/user/delete").success(function(n){e(n)}).error(function(e){o(e)})}}]);